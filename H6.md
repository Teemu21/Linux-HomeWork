# H6 - Akkuna

## By Teemu Koskinen

## Windows koneen rauta:

OS: Windows 11

CPU: 11th Gen i5-11300H @ 3.10GHz

GPU: RTX 3060 Laptop

RAM: 16 GT

Muut Linux tehtävät on tehty oikealla Linux läppärillä, jonka raudalla on oma sivu täällä Linux-HomeWork repossa ja sillä tullaan myös tekemään suurimmaksi osaksi tuo oma miniprojketi. 

## v) Lue ja tiivistä artikkeli muutamalla ranskalaisella viivalla. Tässä z-alakohdassa ei tarvitse siis tehdä testejä tietokoneella.

Karvinen 2018: Control Windows with Salt

- Karvinen käy artikkelin alussa ensin yleisiä asioita LInuxista ja Windowsista.
- Tämän jälkeen käydään läpi Saltin herra version päivitys, sillä herralla on aina oltava sama tai uudempi versio Saltista kuin orjalla. Orjalla eli tässä tapauksessa Windowsilla uudempi versio Saltissa on yleensä selkeästi parempi vaihtoehto kuin vanha Saltin versio koska uusissa Saltin versioissa on parempi Windows tuki.
- Seuraavaksi käsitellään Salt orjan asennus Windowsille, johon löytyy ohjeet ja versiot docs.saltproject.iosta. Samalla käsitellään myös Windows koneen hyväksyminen orjaksi, joka toimii samalla tavalla kuin muidenkin orjien kanssa eli salt-key komennon avulla.
- Tämän jälkeen käydään läpi Windows repojen lisäämistä Salttiin herralla.
- Tämän jälkeen käsittellään pakettien asennusta Windowsilla ja nse toimii pääsääntöiesti samalla tavalla kuin Linuxilla.
- Sitten käydään kerrotaan siit, että Windowsilla on käytössä PowerShell Bashin sijaan.
- Tämän jälkeen käydään läpi miten Salttia voi ajaa paikallisesti Windowsilla ja testata sitä esim. test.ping komennolla.
- Sitten kerrotaan siit, että Windowsilla voi käyttää muitakin paketinhallinta ohjelmia kuin Saltin omaa ja yksi näistä on Chocolatey, jossa on yli 9000 ohjelmaa saatavana.
- Tämän jälkeen esitellään miltä infra koodina näyttää Windowsilla.
- Sitten puhutaan rooleista, mutta artikkelikin sanoo, että niistä tarvitse välittää koska ne eivät oimi useimmilla Windowseilla.
- Lopussa on sitten yhteenveto, jossa ehdotetaan Salt tilojen tekemisestä Windowsille tai siirtymisestä lopullisesti Linuxiin.

## a) Suolaikkuna. Asenna Salt Windowsiin. Jos ehdit jo asentaa, voit kirjoittaa muistinvaraisesti, mutta muista silloin merkitä, että tämä on muistista kirjoitettu. Näytä testillä (test.ping, file.managed tms), että Salt toimii.

Tämä kohta on tehty musitinvaraisena! Eilen 5.5.2022 tunnilla piti asentaa Saltti Windowsille ja meille annettiin tuo Karvisen Control Windows with Salt artikkeli ohjeeksi. Windowssiksi valitsin nykyisen pelikoneeni, koska käytän sitä periaattessa päivittäin pelaamisen lisäksi myös kouluhommiin. Saltin latasin Windowssille [täältä](https://repo.saltproject.io/#windows). 

![salt](salt.png)

Valitsin tosta kuvasta ton Salt-Minion-3004.1-1-Py3-AMD64-Setup.exe tiedoston ja ajoin sen tällä koneella. Kun asennustiedosto kysyi orjan ID:tä niin annoin sille ID:ksi windows ja annoin sille herran osoitteeksi Linux koneeni osoitteen, joka on aiemmin toiminut ainakin Raspberry Pi orjan kanssa. Minulla oli tunnilla SSH yhteys auki herra koneeseen (Koska se oli eri huoneessa, enkä jaksanut liikkua kahden koneen välillä edestakaisin.), jossa ajoin sitten sudo salt 'windows' test.ping komennon ja vastaukseksi tuli true eli Saltti selkeästi toimi nyt mun Windows koneella. Tehdään seuraavaksi local testi Saltista ajamalla tuo aiemmin mainittu test.ping komento.

![local](local.png) 

Kuten yllä olevasta kuvasta näkyy niin Saltti toimii tänäänkin koska test.ping lähettää vastauksen true.

## b) Single. Näytä komentorivillä Saltilla (state.single) esimerkit funktioista file ja cmd.

Tehdääs näistä kahdesta funktiosta esimerkit.

file:

	salt-call --local state.single file.managed C:/test.txt
	[WARNING ] State for file: C:/test.txt - Neither 'source' nor 'contents' nor 'contents_pillar' nor 'contents_grains' was defined, yet 'replace' was set to 'True'. As there is no source to replace the file with, 'replace' has been set	 to 'False' to avoid reading the file unnecessarily.
	local:
	----------
	          ID: C:/test.txt
	    Function: file.managed
	      Result: True
	     Comment: Empty file
	     Started: 15:35:35.170554
	    Duration: 34.585 ms
	     Changes:
	              ----------
	              new:
	                  file C:/test.txt created
	
	Summary for local
	------------
	Succeeded: 1 (changed=1)
	Failed:    0
	------------
	Total states run:     1
	Total run time:  34.585 ms

![c](c.png)

File.managed toiminto vaikuttaa toimivan.



## c) IaCcuna. Tee Windowsissa infraa koodina, ja aja se paikallisesti (salt-call --local state.apply foo)

## e) Goal. Tee projektisi palautussivu. Voit tehdä sen GitHubiin, kotisivullesi tai mihin vain haluat. Mistä teet miniprojektin? Kuvaile miniprojektin tarkoitus lauseella tai parilla. Asenna käsin (jokin alustava osa) projektistasi ja ota ruutukaappaus siitä, miten lopputulosta käytetään. Tietysti pääset tekemään paremman ruutukaappauksen, kun projektisi on valmis. Valitse projektille lisenssi (suosittelen GPL 2, voit valita lisenssin vapaasti). Laita sivulle nimesi (tai jos haluat, nimimerkki, mutta suosittelen nimeä). Ja lähdekoodiksi vaikkapa vain Saltin hei maailma. Kirjoita ohje, miten projektisi otetaan käyttöön. Kirjoita projektin kypsyys näkyviin, tässä vaiheessa se on varmaankin alpha, eli vastaaloitettu eikä vielä voi varsinaisesti edes kunnolla testata. Yritä tehdä sivu, jossa tärkeimmät asiat näkyvät taitoksen yllä (skrollaamatta): tarkoitus, ruutukaapaus, lisenssi, nimesi, latauslinkki, kypsyysaste (alpha). Tässä vaiheessa projektin ei vielä tarvitse toimia, vaan kaikkiin osiin tehdään vielä parannuksia. Voit kirjoittaa englanniksi tai suomeksi, suosittelen englantia.

## f & g) 
